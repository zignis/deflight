d8b68019b20312a76f03a783732f447e
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _index = require("../index");
const middlewareMock = jest.fn(()=>undefined);
const nextFunctionMock = jest.fn(()=>undefined);
describe('unit: deflight', ()=>{
    beforeEach(()=>jest.clearAllMocks());
    it('should bypass pre-flight requests', ()=>{
        (0, _index.deflight)(middlewareMock)({
            method: 'OPTIONS'
        }, null, nextFunctionMock);
        expect(middlewareMock).not.toHaveBeenCalled();
        expect(nextFunctionMock.mock.calls).toHaveLength(1);
    });
    it('should skip requests that are not pre-flight', ()=>{
        (0, _index.deflight)(middlewareMock)({
            method: 'GET'
        }, null, nextFunctionMock);
        expect(middlewareMock.mock.calls).toHaveLength(1);
        expect(nextFunctionMock).not.toHaveBeenCalled();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFxkZWZsaWdodFxcc3JjXFxfX3Rlc3RzX19cXGluZGV4LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmbGlnaHQgfSBmcm9tICcuLi9pbmRleCc7XG5cbmNvbnN0IG1pZGRsZXdhcmVNb2NrID0gamVzdC5mbigoKSA9PiB1bmRlZmluZWQpO1xuY29uc3QgbmV4dEZ1bmN0aW9uTW9jayA9IGplc3QuZm4oKCkgPT4gdW5kZWZpbmVkKTtcblxuZGVzY3JpYmUoJ3VuaXQ6IGRlZmxpZ2h0JywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IGplc3QuY2xlYXJBbGxNb2NrcygpKTtcblxuICBpdCgnc2hvdWxkIGJ5cGFzcyBwcmUtZmxpZ2h0IHJlcXVlc3RzJywgKCkgPT4ge1xuICAgIGRlZmxpZ2h0KG1pZGRsZXdhcmVNb2NrKShcbiAgICAgIHsgbWV0aG9kOiAnT1BUSU9OUycgfSBhcyBhbnksXG4gICAgICBudWxsLFxuICAgICAgbmV4dEZ1bmN0aW9uTW9jayxcbiAgICApO1xuXG4gICAgZXhwZWN0KG1pZGRsZXdhcmVNb2NrKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChuZXh0RnVuY3Rpb25Nb2NrLm1vY2suY2FsbHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBza2lwIHJlcXVlc3RzIHRoYXQgYXJlIG5vdCBwcmUtZmxpZ2h0JywgKCkgPT4ge1xuICAgIGRlZmxpZ2h0KG1pZGRsZXdhcmVNb2NrKSh7IG1ldGhvZDogJ0dFVCcgfSBhcyBhbnksIG51bGwsIG5leHRGdW5jdGlvbk1vY2spO1xuXG4gICAgZXhwZWN0KG1pZGRsZXdhcmVNb2NrLm1vY2suY2FsbHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QobmV4dEZ1bmN0aW9uTW9jaykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlTW9jayIsImplc3QiLCJmbiIsInVuZGVmaW5lZCIsIm5leHRGdW5jdGlvbk1vY2siLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJkZWZsaWdodCIsIm1ldGhvZCIsImV4cGVjdCIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrIiwiY2FsbHMiLCJ0b0hhdmVMZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7dUJBQXlCO0FBRXpCLE1BQU1BLGlCQUFpQkMsS0FBS0MsRUFBRSxDQUFDLElBQU1DO0FBQ3JDLE1BQU1DLG1CQUFtQkgsS0FBS0MsRUFBRSxDQUFDLElBQU1DO0FBRXZDRSxTQUFTLGtCQUFrQixJQUFNO0lBQy9CQyxXQUFXLElBQU1MLEtBQUtNLGFBQWE7SUFFbkNDLEdBQUcscUNBQXFDLElBQU07UUFDNUNDLElBQUFBLGVBQVEsRUFBQ1QsZ0JBQ1A7WUFBRVUsUUFBUTtRQUFVLEdBQ3BCLElBQUksRUFDSk47UUFHRk8sT0FBT1gsZ0JBQWdCWSxHQUFHLENBQUNDLGdCQUFnQjtRQUMzQ0YsT0FBT1AsaUJBQWlCVSxJQUFJLENBQUNDLEtBQUssRUFBRUMsWUFBWSxDQUFDO0lBQ25EO0lBRUFSLEdBQUcsZ0RBQWdELElBQU07UUFDdkRDLElBQUFBLGVBQVEsRUFBQ1QsZ0JBQWdCO1lBQUVVLFFBQVE7UUFBTSxHQUFVLElBQUksRUFBRU47UUFFekRPLE9BQU9YLGVBQWVjLElBQUksQ0FBQ0MsS0FBSyxFQUFFQyxZQUFZLENBQUM7UUFDL0NMLE9BQU9QLGtCQUFrQlEsR0FBRyxDQUFDQyxnQkFBZ0I7SUFDL0M7QUFDRiJ9