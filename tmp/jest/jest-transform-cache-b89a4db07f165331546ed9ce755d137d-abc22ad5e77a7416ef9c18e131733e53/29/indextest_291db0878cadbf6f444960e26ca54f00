ab183ca3b8a7ffa4e32579b68bbd8f7b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _index = require("../index");
const middlewareMock = jest.fn(()=>undefined);
const nextFunctionMock = jest.fn(()=>undefined);
describe('unit: deflight', ()=>{
    beforeEach(()=>jest.clearAllMocks());
    it('should bypass preflight requests', ()=>{
        (0, _index.deflight)(middlewareMock)({
            method: 'OPTIONS'
        }, null, nextFunctionMock);
        expect(middlewareMock.mock).not.toHaveBeenCalled();
        expect(nextFunctionMock.mock.calls).toHaveLength(1);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFxkZWZsaWdodFxcc3JjXFxfX3Rlc3RzX19cXGluZGV4LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmbGlnaHQgfSBmcm9tICcuLi9pbmRleCc7XG5cbmNvbnN0IG1pZGRsZXdhcmVNb2NrID0gamVzdC5mbigoKSA9PiB1bmRlZmluZWQpO1xuY29uc3QgbmV4dEZ1bmN0aW9uTW9jayA9IGplc3QuZm4oKCkgPT4gdW5kZWZpbmVkKTtcblxuZGVzY3JpYmUoJ3VuaXQ6IGRlZmxpZ2h0JywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IGplc3QuY2xlYXJBbGxNb2NrcygpKTtcblxuICBpdCgnc2hvdWxkIGJ5cGFzcyBwcmVmbGlnaHQgcmVxdWVzdHMnLCAoKSA9PiB7XG4gICAgZGVmbGlnaHQobWlkZGxld2FyZU1vY2spKFxuICAgICAgeyBtZXRob2Q6ICdPUFRJT05TJyB9IGFzIGFueSxcbiAgICAgIG51bGwsXG4gICAgICBuZXh0RnVuY3Rpb25Nb2NrLFxuICAgICk7XG5cbiAgICBleHBlY3QobWlkZGxld2FyZU1vY2subW9jaykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBleHBlY3QobmV4dEZ1bmN0aW9uTW9jay5tb2NrLmNhbGxzKS50b0hhdmVMZW5ndGgoMSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsibWlkZGxld2FyZU1vY2siLCJqZXN0IiwiZm4iLCJ1bmRlZmluZWQiLCJuZXh0RnVuY3Rpb25Nb2NrIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiZGVmbGlnaHQiLCJtZXRob2QiLCJleHBlY3QiLCJtb2NrIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImNhbGxzIiwidG9IYXZlTGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7O3VCQUF5QjtBQUV6QixNQUFNQSxpQkFBaUJDLEtBQUtDLEVBQUUsQ0FBQyxJQUFNQztBQUNyQyxNQUFNQyxtQkFBbUJILEtBQUtDLEVBQUUsQ0FBQyxJQUFNQztBQUV2Q0UsU0FBUyxrQkFBa0IsSUFBTTtJQUMvQkMsV0FBVyxJQUFNTCxLQUFLTSxhQUFhO0lBRW5DQyxHQUFHLG9DQUFvQyxJQUFNO1FBQzNDQyxJQUFBQSxlQUFRLEVBQUNULGdCQUNQO1lBQUVVLFFBQVE7UUFBVSxHQUNwQixJQUFJLEVBQ0pOO1FBR0ZPLE9BQU9YLGVBQWVZLElBQUksRUFBRUMsR0FBRyxDQUFDQyxnQkFBZ0I7UUFDaERILE9BQU9QLGlCQUFpQlEsSUFBSSxDQUFDRyxLQUFLLEVBQUVDLFlBQVksQ0FBQztJQUNuRDtBQUNGIn0=