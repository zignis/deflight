d583ce244abd716862169e42b524273f
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _index = require("../index");
const middlewareMock = jest.fn();
const nextFunctionMock = jest.fn();
describe('unit: deflight', ()=>{
    beforeEach(()=>jest.clearAllMocks());
    it('should bypass pre-flight requests', ()=>{
        (0, _index.deflight)(middlewareMock)({
            method: 'OPTIONS'
        }, null, nextFunctionMock);
        expect(middlewareMock).not.toHaveBeenCalled();
        expect(nextFunctionMock.mock.calls).toHaveLength(1);
    });
    it('should skip requests that are not pre-flight', ()=>{
        (0, _index.deflight)(middlewareMock)({
            method: 'GET'
        }, null, nextFunctionMock);
        expect(middlewareMock.mock.calls).toHaveLength(1);
        expect(nextFunctionMock).not.toHaveBeenCalled();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFxkZWZsaWdodFxcc3JjXFxfX3Rlc3RzX19cXGluZGV4LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmbGlnaHQgfSBmcm9tICcuLi9pbmRleCc7XG5cbmNvbnN0IG1pZGRsZXdhcmVNb2NrID0gamVzdC5mbigpO1xuY29uc3QgbmV4dEZ1bmN0aW9uTW9jayA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ3VuaXQ6IGRlZmxpZ2h0JywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IGplc3QuY2xlYXJBbGxNb2NrcygpKTtcblxuICBpdCgnc2hvdWxkIGJ5cGFzcyBwcmUtZmxpZ2h0IHJlcXVlc3RzJywgKCkgPT4ge1xuICAgIGRlZmxpZ2h0KG1pZGRsZXdhcmVNb2NrKShcbiAgICAgIHsgbWV0aG9kOiAnT1BUSU9OUycgfSBhcyBhbnksXG4gICAgICBudWxsLFxuICAgICAgbmV4dEZ1bmN0aW9uTW9jayxcbiAgICApO1xuXG4gICAgZXhwZWN0KG1pZGRsZXdhcmVNb2NrKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChuZXh0RnVuY3Rpb25Nb2NrLm1vY2suY2FsbHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBza2lwIHJlcXVlc3RzIHRoYXQgYXJlIG5vdCBwcmUtZmxpZ2h0JywgKCkgPT4ge1xuICAgIGRlZmxpZ2h0KG1pZGRsZXdhcmVNb2NrKSh7IG1ldGhvZDogJ0dFVCcgfSBhcyBhbnksIG51bGwsIG5leHRGdW5jdGlvbk1vY2spO1xuXG4gICAgZXhwZWN0KG1pZGRsZXdhcmVNb2NrLm1vY2suY2FsbHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QobmV4dEZ1bmN0aW9uTW9jaykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlTW9jayIsImplc3QiLCJmbiIsIm5leHRGdW5jdGlvbk1vY2siLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJkZWZsaWdodCIsIm1ldGhvZCIsImV4cGVjdCIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrIiwiY2FsbHMiLCJ0b0hhdmVMZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7dUJBQXlCO0FBRXpCLE1BQU1BLGlCQUFpQkMsS0FBS0MsRUFBRTtBQUM5QixNQUFNQyxtQkFBbUJGLEtBQUtDLEVBQUU7QUFFaENFLFNBQVMsa0JBQWtCLElBQU07SUFDL0JDLFdBQVcsSUFBTUosS0FBS0ssYUFBYTtJQUVuQ0MsR0FBRyxxQ0FBcUMsSUFBTTtRQUM1Q0MsSUFBQUEsZUFBUSxFQUFDUixnQkFDUDtZQUFFUyxRQUFRO1FBQVUsR0FDcEIsSUFBSSxFQUNKTjtRQUdGTyxPQUFPVixnQkFBZ0JXLEdBQUcsQ0FBQ0MsZ0JBQWdCO1FBQzNDRixPQUFPUCxpQkFBaUJVLElBQUksQ0FBQ0MsS0FBSyxFQUFFQyxZQUFZLENBQUM7SUFDbkQ7SUFFQVIsR0FBRyxnREFBZ0QsSUFBTTtRQUN2REMsSUFBQUEsZUFBUSxFQUFDUixnQkFBZ0I7WUFBRVMsUUFBUTtRQUFNLEdBQVUsSUFBSSxFQUFFTjtRQUV6RE8sT0FBT1YsZUFBZWEsSUFBSSxDQUFDQyxLQUFLLEVBQUVDLFlBQVksQ0FBQztRQUMvQ0wsT0FBT1Asa0JBQWtCUSxHQUFHLENBQUNDLGdCQUFnQjtJQUMvQztBQUNGIn0=